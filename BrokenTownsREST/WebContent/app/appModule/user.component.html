<div class="container">
<!-- <ng-map center="[38,-77]" zoom="9"></ng-map> -->
	<div class="well">
		<h1>Welcome, {{vm.user.firstName}}!</h1>
		<h2>Your Remaining Projects: <span class="label label-success">{{vm.getNumCaseItems()}}</span></h2>
	</div>
	<div ng-show="vm.user.caseItems.size > 0" ng-hide = "vm.selected" class="well">
		<table class="table table-striped well">
		  <thead>
		  	<tr>
		  	  <td>Project Name</td>
		  	  <td>Severity</td>
		  	  <td>description</td>
		  	  <td>Completed?</td>
		  	</tr>
		  </thead>
		  
		  <tbody>
		  	<tr ng-repeat="caseItem in vm.caseItems" ng-click="vm.applySelected(caseItem)">
		  		<td>{{caseItem.title}}</td>
		  		<td>{{caseItem.severity}}</td>
		  		<td>{{caseItem.description}}</td>
		  		<td>{{caseItem.done}}</td>
		  	</tr>
		  </tbody>
		
		</table>
	</div>
	
	<div class="well" ng-if="vm.selected">
		<div class="row col-md-6">
		<h2>{{vm.selected.title}} <span class="label label-success" ng-class="vm.setSeverityColor()">{{vm.selected.severity}}</span></h2>
		<h3>{{vm.selected.municipality.name}}</h3>
		<img src="{{vm.selected.photo.url}}"/>
		<p>{{vm.selected.description}}</p>
		<ul>
			<li>Lat: {{vm.selected.latitude}}</li>
			<li>Long: {{vm.selected.longitude}}</li>
		</ul>
		</div>
		<div class="row col-md-6">
			<table>
				<tr>
					<th><h1>Messages</h1></th>
				</tr>
				<tr>
					<td>
					<button type="btn" class="btn btn-info" ng-click="vm.changeShowCreateMessageVariable()" ng-show="vm.showCreateMessage">Create A Message</button>
					</td>
				</tr>
					<!-- Message Board Below -->
				 <tr ng-hide="vm.showCreateMessage">
					<td><input type="text" placeholder="Message" ng-model="message.text"/></td>
					<td><button type="btn" class="btn btn-info" ng-click="vm.createMessage(vm.selected.id, message);  vm.showMessages(vm.selected.id); vm.changeVariableToTrue(); message={}">Create</button></td>
					<td><button type="btn" class="btn btn-danger" ng-click="vm.changeVariableToTrue(); message={}">Don't Create</button>
				</tr>
			</table>
			<div id="messageBoard">
			<table>
				<tr ng-repeat="message in vm.messages">			
					<td><div>{{message.user.firstName}} {{message.user.lastName}}:  {{message.text}}<br><br> </div></td>
				</tr>	
			</table>
			</div>
			
			
		</div>
		<!-- Maps Stuff -->
		<div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{vm.mapKey}}" class="well map" id="userMessage">
			<ng-map id="map" center="[{{vm.selected.latitude}}, {{vm.selected.longitude}}]" zoom="9">
				<marker position="[{{vm.selected.latitude}}, {{vm.selected.longitude}}]"></marker>
			</ng-map>
		</div>
		<table class="table table-striped">
			<tr ng-repeat="message in vm.messages">
				<td>{{message.text}}</td>
			</tr>
		</table>
		<!-- <div id="messageBoard">
			<table>
				<tr ng-repeat="message in vm.messages">			
					<td><div>{{message.user.firstName}} {{message.user.lastName}}:  {{message.text}}<br><br> </div></td>
				</tr>	
			</table>
			</div> -->

	<button type="btn" class="btn btn-info" ng-click="vm.selected = null;">Back</button>
		
	</div>
	
	<!-- Maps stuff -->
	
	
		<!-- MESSAGES -->
		<!-- <ul>
			<li ng-repeat="messages in vm.messages">{{messages.text}}</li>
		</ul> -->
</div>